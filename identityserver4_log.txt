2018-10-02 20:07:03.444 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 20:07:03.468 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 20:07:03.469 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 20:07:03.469 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 20:07:03.469 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 20:36:45.612 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 20:36:45.648 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 20:36:45.648 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 20:36:45.648 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 20:36:45.649 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 20:36:45.912 -05:00 [DBG] Starting token cleanup
2018-10-02 20:36:51.525 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 20:36:55.768 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 20:36:55.853 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8Q2N3RS3B:00000002",
  "TimeStamp": "2018-10-03T01:36:55Z",
  "ProcessId": 21240,
  "LocalIpAddress": "127.0.0.1:23872",
  "RemoteIpAddress": "::1"
}
2018-10-02 20:36:55.866 -05:00 [DBG] Augmenting SignInContext
2018-10-02 20:36:55.867 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 20:36:55.868 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 20:36:55.876 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 20:36:55.881 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 20:36:55.881 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 20:36:56.200 -05:00 [ERR] Failed executing DbCommand (37ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[SubjectId] = @__subjectId_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:208,State:1,Class:16
2018-10-02 20:36:56.238 -05:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:208,State:1,Class:16
2018-10-02 20:36:57.754 -05:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] TEXT NOT NULL,
    [ClientId] TEXT NOT NULL,
    [CreationTime] TEXT NOT NULL,
    [Data] TEXT NOT NULL,
    [Expiration] TEXT NULL,
    [SubjectId] TEXT NULL,
    [Type] TEXT NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
System.Data.SqlClient.SqlException (0x80131904): Column 'Key' in table 'PersistedGrants' is of a type that is invalid for use as a key column in an index.
Could not create constraint or index. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:1919,State:1,Class:16
2018-10-02 20:36:57.767 -05:00 [ERR] An error occurred while applying the migrations for 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'. See InnerException for details.System.Data.SqlClient.SqlException (0x80131904): Column 'Key' in table 'PersistedGrants' is of a type that is invalid for use as a key column in an index.
Could not create constraint or index. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:1919,State:1,Class:16
2018-10-02 20:36:57.768 -05:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: An error occurred while applying the migrations for 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'. See InnerException for details.System.Data.SqlClient.SqlException (0x80131904): Column 'Key' in table 'PersistedGrants' is of a type that is invalid for use as a key column in an index.
Could not create constraint or index. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
ClientConnectionId:720068d5-1241-461a-b78f-04b927847ce5
Error Number:1919,State:1,Class:16 ---> System.Data.SqlClient.SqlException: Column 'Key' in table 'PersistedGrants' is of a type that is invalid for use as a key column in an index.
Could not create constraint or index. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-10-02 21:19:02.941 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:19:02.964 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:19:02.964 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:19:02.964 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:19:02.964 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:20:49.259 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:20:49.281 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:20:49.281 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:20:49.281 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:20:49.281 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:21:13.799 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:21:13.825 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:21:13.826 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:21:13.826 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:21:13.826 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:21:13.984 -05:00 [DBG] Starting token cleanup
2018-10-02 21:21:18.083 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 21:21:25.336 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 21:21:25.426 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8QRI6MTFO:00000003",
  "TimeStamp": "2018-10-03T02:21:25Z",
  "ProcessId": 19956,
  "LocalIpAddress": "127.0.0.1:25561",
  "RemoteIpAddress": "::1"
}
2018-10-02 21:21:25.439 -05:00 [DBG] Augmenting SignInContext
2018-10-02 21:21:25.441 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 21:21:25.441 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 21:21:25.450 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 21:21:25.454 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:21:25.455 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:21:25.708 -05:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[SubjectId] = @__subjectId_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:a3de7a24-f242-4ccf-822d-da9f2545de90
Error Number:208,State:1,Class:16
2018-10-02 21:21:25.740 -05:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:a3de7a24-f242-4ccf-822d-da9f2545de90
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:a3de7a24-f242-4ccf-822d-da9f2545de90
Error Number:208,State:1,Class:16
2018-10-02 21:23:40.600 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:23:40.624 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:23:40.624 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:23:40.624 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:23:40.624 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:23:48.045 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:23:48.068 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:23:48.068 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:23:48.068 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:23:48.068 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:24:05.863 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:24:05.888 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:24:05.888 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:24:05.888 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:24:05.888 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:24:06.037 -05:00 [DBG] Starting token cleanup
2018-10-02 21:24:10.955 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 21:24:15.442 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 21:24:15.526 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8QT5HLF3N:00000003",
  "TimeStamp": "2018-10-03T02:24:15Z",
  "ProcessId": 19656,
  "LocalIpAddress": "127.0.0.1:31918",
  "RemoteIpAddress": "::1"
}
2018-10-02 21:24:15.538 -05:00 [DBG] Augmenting SignInContext
2018-10-02 21:24:15.540 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 21:24:15.540 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 21:24:15.548 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 21:24:15.552 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:24:15.553 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:24:15.815 -05:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[SubjectId] = @__subjectId_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:8807473d-7d9c-4a4c-9f63-9ecb703b3b29
Error Number:208,State:1,Class:16
2018-10-02 21:24:15.847 -05:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:8807473d-7d9c-4a4c-9f63-9ecb703b3b29
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.<_TrackEntities>d__17`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:8807473d-7d9c-4a4c-9f63-9ecb703b3b29
Error Number:208,State:1,Class:16
2018-10-02 21:24:21.913 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:24:21.913 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:24:21.922 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-02 21:24:22.085 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:24:22.086 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:46:57.520 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 21:46:57.545 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 21:46:57.545 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 21:46:57.545 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 21:46:57.545 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 21:46:57.681 -05:00 [DBG] Starting token cleanup
2018-10-02 21:47:05.754 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 21:47:10.516 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 21:47:10.599 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8R9UAEO63:00000003",
  "TimeStamp": "2018-10-03T02:47:10Z",
  "ProcessId": 21308,
  "LocalIpAddress": "127.0.0.1:17770",
  "RemoteIpAddress": "::1"
}
2018-10-02 21:47:10.611 -05:00 [DBG] Augmenting SignInContext
2018-10-02 21:47:10.613 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 21:47:10.613 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 21:47:10.622 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 21:47:10.626 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:47:10.626 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 21:47:10.658 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-02 22:06:08.236 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 22:06:08.261 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 22:06:08.261 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 22:06:08.261 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 22:06:08.261 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 22:06:08.397 -05:00 [DBG] Starting token cleanup
2018-10-02 22:06:12.282 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 22:06:16.252 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 22:06:16.332 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8RKL6KH9G:00000003",
  "TimeStamp": "2018-10-03T03:06:16Z",
  "ProcessId": 14028,
  "LocalIpAddress": "127.0.0.1:9817",
  "RemoteIpAddress": "::1"
}
2018-10-02 22:06:16.347 -05:00 [DBG] Augmenting SignInContext
2018-10-02 22:06:16.348 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 22:06:16.348 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 22:06:16.357 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 22:06:16.361 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:06:16.361 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:06:16.428 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-02 22:12:37.132 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 22:12:37.161 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 22:12:37.161 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 22:12:37.161 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 22:12:37.161 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 22:12:37.301 -05:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Swashbuckle.AspNetCore.Swagger.ISwaggerProvider' while attempting to activate 'Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2018-10-02 22:12:37.384 -05:00 [DBG] Starting token cleanup
2018-10-02 22:13:38.191 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 22:13:38.216 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 22:13:38.216 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 22:13:38.216 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 22:13:38.216 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 22:13:38.435 -05:00 [DBG] Starting token cleanup
2018-10-02 22:42:47.388 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 22:42:47.413 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 22:42:47.413 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 22:42:47.413 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 22:42:47.413 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 22:42:47.634 -05:00 [DBG] Starting token cleanup
2018-10-02 22:43:59.625 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 22:44:03.742 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 22:44:03.801 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8S94LOTQ4:00000003",
  "TimeStamp": "2018-10-03T03:44:03Z",
  "ProcessId": 9964,
  "LocalIpAddress": "127.0.0.1:15960",
  "RemoteIpAddress": "::1"
}
2018-10-02 22:44:03.814 -05:00 [DBG] Augmenting SignInContext
2018-10-02 22:44:03.815 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 22:44:03.815 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 22:44:03.824 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 22:44:03.828 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:44:03.829 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:44:04.094 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-02 22:50:53.803 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 22:50:53.828 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 22:50:53.828 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 22:50:53.828 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 22:50:53.828 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 22:50:54.052 -05:00 [DBG] Starting token cleanup
2018-10-02 22:50:54.304 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:50:54.317 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:51:03.865 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:51:03.865 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:51:03.870 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-02 22:51:03.875 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-02 22:51:03.875 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-02 22:51:03.878 -05:00 [DBG] Start discovery request
2018-10-02 22:51:04.633 -05:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2018-10-02 22:51:14.744 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:51:14.744 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 22:51:14.817 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-02 23:54:54.473 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 23:54:54.498 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 23:54:54.498 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 23:54:54.498 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 23:54:54.498 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 23:54:54.719 -05:00 [DBG] Starting token cleanup
2018-10-02 23:54:54.871 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 23:54:54.884 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 23:58:45.821 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-02 23:58:45.846 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-02 23:58:45.846 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-02 23:58:45.846 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-02 23:58:45.846 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-02 23:58:46.077 -05:00 [DBG] Starting token cleanup
2018-10-02 23:58:46.415 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:46.428 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:51.129 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:51.129 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:51.149 -05:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-02 23:58:51.153 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:51.153 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:56.275 -05:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-02 23:58:56.276 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:56.276 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:56.340 -05:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLH8TJJ6NV22:00000003",
  "TimeStamp": "2018-10-03T04:58:56Z",
  "ProcessId": 11744,
  "LocalIpAddress": "127.0.0.1:24513",
  "RemoteIpAddress": "::1"
}
2018-10-02 23:58:56.352 -05:00 [DBG] Augmenting SignInContext
2018-10-02 23:58:56.354 -05:00 [DBG] Adding idp claim with value: local
2018-10-02 23:58:56.354 -05:00 [DBG] Adding amr claim with value: pwd
2018-10-02 23:58:56.357 -05:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2018-10-02 23:58:56.362 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-02 23:58:56.367 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 23:58:56.367 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-02 23:58:56.638 -05:00 [DBG] 0 persisted grants found for 88421113
2018-10-03 00:01:21.966 -05:00 [DBG] Using idsrv as default scheme for authentication
2018-10-03 00:01:21.991 -05:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-03 00:01:21.991 -05:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-03 00:01:21.991 -05:00 [DBG] Using idsrv as default scheme for challenge
2018-10-03 00:01:21.991 -05:00 [DBG] Using idsrv as default scheme for forbid
2018-10-03 00:01:22.210 -05:00 [DBG] Starting token cleanup
2018-10-03 00:01:22.453 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-03 00:01:22.466 -05:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
